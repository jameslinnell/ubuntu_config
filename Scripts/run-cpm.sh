#!/bin/bash
# Navigate to the project directory
#tmux new-session -s connecting-party-manager
cd ~/Development/NHS/CPM/connecting-party-manager || exit 1

# Initialize variables to track options
BUILD=false
TEST=false
DESTROY=false
TESTUNIT=false
TESTINTEGRATION=false
TESTFEATURELOCAL=false
TESTFEATUREINTEGRATION=false
TESTSMOKE=false
WORKSPACE=$(~/Scripts/terraform-workspace.sh)
emoji1="๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ" 
emoji2="๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ"
IGNORE_TESTS=false

# Parse options
while [ $# -gt 0 ]; do
  case $1 in
    --build)
      BUILD=true
      shift
      ;;
    --test)
      TEST=true
      shift
      ;;
    --unittest)
      TESTUNIT=true
      shift
      ;;
    --inttest)
      TESTINTEGRATION=true
      shift
      ;;
    --feattest)
      TESTFEATURELOCAL=true
      shift
      ;;
    --featinttest)
      TESTFEATUREINTEGRATION=true
      shift
      ;;
    --smoketest)
      TESTSMOKE=true
      shift
      ;;
    --destroy)
      DESTROY=true
      shift
      ;;
    --ignore)
      IGNORE_TESTS=true
      shift
      ;;
    *)
      echo "Invalid option: $1"
      echo "Usage: $0 [--build] [--test] [--destroy]"
      exit 1
      ;;
  esac
done

# If no options were provided, set all to true to run all steps in order
if [ "$IGNORE_TESTS" = false ] && [ "$BUILD" = false ] && [ "$TEST" = false ] && [ "$DESTROY" = false ] && [ "$TESTUNIT" = false ] && [ "$TESTINTEGRATION" = false ] && [ "$TESTFEATURELOCAL" = false ] && [ "$TESTFEATUREINTEGRATION" = false ] && [ "$TESTSMOKE" = false ]; then
  BUILD=true
  TEST=true
  DESTROY=true
fi

all_success=true  # Flag to track overall success
# Enforce specific order: build -> test -> destroy
if [ "$BUILD" = true ]; then
  clear
  echo ""
  echo ""
  echo "\033[36m
     โโโโโโโโโโโโโโ โโโโ   โโโโ
    โโโโโโโโโโโโโโโโโโโโโ โโโโโ
    โโโ     โโโโโโโโโโโโโโโโโโโ
    โโโ     โโโโโโโ โโโโโโโโโโโ
    โโโโโโโโโโโ     โโโ โโโ โโโ
     โโโโโโโโโโ     โโโ     โโโ
  \033[0m"
  echo ""
  echo ""
  echo "\033[32mโจ๐คฉ ...Running build... ๐คฉโจ\033[0m"
  echo ""
  echo ""
  sleep 4
  clear
  make terraform--apply && clear && make apigee--deploy && make apigee--attach-product && clear
  if [ $? -ne 0 ]; then
    echo "\033[31mBuild failed...\033[0m" # Red text
    echo ""
    echo ""
    echo "๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ"
    echo ""
    echo "\033[31m      
      โโโโโโโโ โโโโโโ โโโโโโ     โโโ   โโโโโโโโโโ โโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโโโโโโโโโโโโ     โโโ   โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโ  โโโโโโโโโโโโโโ     โโโ   โโโโโโโโโโโโโโโโโ      โโโโโโโโโ
      โโโโโโ  โโโโโโโโโโโโโโ     โโโ   โโโโโโโโโโโโโโโโโ      โโโโโโโโโ
      โโโ     โโโ  โโโโโโโโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโ    โโโโโโโโโ
      โโโ     โโโ  โโโโโโโโโโโโโโ โโโโโโโ โโโ  โโโโโโโโโโโ    โโโโโโโโโ
     \033[0m"                                                           
    echo ""
    echo "๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ"
    echo ""
    all_success=false
  else
    echo "\033[32mโจ๐คฉ ...CPM Build was successful... ๐คฉโจ\033[0m" # Green text
    echo ""
    echo "๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ"
    echo ""
    echo "\033[32m
      โโโโโโโโโโโ   โโโ โโโโโโโ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโ   โโโโโโ     โโโ     โโโโโโ  โโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโ   โโโโโโ     โโโ     โโโโโโ  โโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโ โโโโโโโ  โโโโโโโ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
    \033[0m"
    echo ""
    echo "๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ"
    echo ""
    echo "\033[32m
              _______ยงยง_____ยงยงยง___ยงยงยง____ยงยงยง___ยง________ยงยง
              ______ยง__ยง___ยง_____ยง___ยง__ยง___ยง__ยง_______ยง__ยง
              ______ยง__ยง___ยง_____ยง___ยง__ยง___ยง__ยง_______ยง__ยง
              ______ยง__ยง____ยงยงยง___ยงยงยง____ยงยงยง___ยงยงยงยง____ยง__ยง
              _ยงยง____ยง__ยง_____________________________ยง__ยง____ยงยง
              ยง__ยง___ยง__ยง_____________________________ยง__ยง___ยง__ยง
              ยง___ยง__ยง__ยง_____________________________ยง__ยง__ยง___ยง
              _ยง___ยง__ยง__ยง___________________________ยง__ยง__ยง___ยง
              __ยง___ยงยงยงยงยงยงยง_________________________ยงยงยงยงยงยงยง___ยง
              ___ยง____ยง___ยง_________________________ยง___ยง____ยง
              ____ยงยงยงยง_____ยง_______________________ยง_____ยงยงยงยง
              ___ยง___ยง__ยงยง_ยง_________ยงยงยงยงยง_________ยง_ยงยง__ยง___ยง
              ___ยง___ยง__ยง__ยง_______ยงยง_____ยงยง_______ยง__ยง__ยง___ยง
              ____ยงยงยงยงยงยง___ยง______ยง_________ยง______ยง___ยงยงยงยงยงยง
              ____ยง___ยง___ยง_ยง____ยง__8____8___ยง____ยง_ยง___ยง___ยง
              _____ยงยงยง___ยง___ยง___ยง___________ยง___ยง___ยง___ยงยงยง
              ________ยงยงยงยงยง___ยง_ยง_____________ยง_ยง___ยงยงยงยงยง
              _____________ยงยง__ยงยง_ยงยงยงยงยงยงยงยงยงยงยง_ยงยง__ยงยง
              _______________ยง__ยง_ยง__ยง___ยง__ยง_ยง__ยง
              ________________ยง_ยง_ยง__ยง___ยง__ยง_ยง_ยง
              _________________ยงยง_ยง__ยง___ยง__ยง_ยงยง
              __________________ยงยง_ยง_ยง___ยง_ยง_ยงยง
              ___________________ยง__ยงยงยงยงยงยงยง__ยง
              ____________________ยง__ยงยงยงยงยง__ยง
              _____________________ยงยง_____ยงยง
              _______________________ยงยงยงยงยง
    \033[0m"
    sleep 4
  fi
fi

if [ "$TEST" = true ] && [ "$all_success" = true ]; then
  clear
  echo "\033[32mโจ๐คฉ ...Running tests... ๐คฉโจ\033[0m" 

  if [ "$IGNORE_TESTS" = true ]; then
    # run_test_with_spinner "test--unit" ~/logs/unit.log
    # clear
    # run_test_with_spinner "test--integration" ~/logs/int.log
    # clear
    # run_test_with_spinner "test--feature--local" ~/logs/floc.log
    # clear
    # run_test_with_spinner "test--feature--integration" ~/logs/fint.log
    # clear
    # run_test_with_spinner "test--smoke" ~/logs/smoke.log
    # clear
    make --always-make test--unit | tee ~/logs/unit.log
    clear
    make --always-make test--integration | tee ~/logs/int.log
    clear 
    make --always-make test--feature--local | tee ~/logs/floc.log
    clear
    make --always-make test--feature--integration | tee ~/logs/fint.log
    clear
    make --always-make test--smoke | tee ~/logs/smoke.log
    clear
    clear
    echo "\033[31m---------------------\033[0m"
    echo "\033[31mUnit Test Failures...\033[0m"
    echo "\033[31m---------------------\033[0m"
    echo ""
    grep "FAILED" ~/logs/unit.log
    echo ""
    echo "\033[31m----------------------------\033[0m"
    echo "\033[31mIntegration Test Failures...\033[0m"
    echo "\033[31m----------------------------\033[0m"
    echo ""
    grep "FAILED" ~/logs/int.log
    echo ""
    echo "\033[31m------------------------------\033[0m"
    echo "\033[31mFeature Test Local Failures...\033[0m"
    echo "\033[31m------------------------------\033[0m"
    echo ""
    grep --after-context 60 "Failing scenarios:" ~/logs/floc.log
    echo ""
    echo "\033[31m------------------------------------\033[0m"
    echo "\033[31mFeature Test Integration Failures...\033[0m"
    echo "\033[31m------------------------------------\033[0m"
    echo ""
    grep --after-context 60 "Failing scenarios:" ~/logs/fint.log
    echo ""
    echo "\033[31m-----------------\033[0m"
    echo "\033[31mSmoke Failures...\033[0m"
    echo "\033[31m-----------------\033[0m"
    echo ""
    grep "FAILED" ~/logs/smoke.log
    echo ""
  else
    make test--unit && clear && make test--integration && clear && make test--feature--local && clear && make test--feature--integration && clear && make test--smoke && clear
  fi
  if [ $? -ne 0 ]; then
    echo "\033[31mTests failed...\033[0m"
    echo ""
    echo ""
    echo "๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ"
    echo ""
    echo "\033[31m      
      โโโโโโโโ โโโโโโ โโโโโโ     โโโ   โโโโโโโโโโ โโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโโโโโโโโโโโโ     โโโ   โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโ  โโโโโโโโโโโโโโ     โโโ   โโโโโโโโโโโโโโโโโ      โโโโโโโโโ
      โโโโโโ  โโโโโโโโโโโโโโ     โโโ   โโโโโโโโโโโโโโโโโ      โโโโโโโโโ
      โโโ     โโโ  โโโโโโโโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโ    โโโโโโโโโ
      โโโ     โโโ  โโโโโโโโโโโโโโ โโโโโโโ โโโ  โโโโโโโโโโโ    โโโโโโโโโ
    \033[0m"                                                           
    echo ""
    echo "๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ"
    echo ""
    all_success=false
  else
    echo ""
    echo "๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ"
    echo ""
    echo "\033[32m
      โโโโโโโโโโโ   โโโ โโโโโโโ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโ   โโโโโโ     โโโ     โโโโโโ  โโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโ   โโโโโโ     โโโ     โโโโโโ  โโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโ โโโโโโโ  โโโโโโโ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
    \033[0m"
    echo ""
    echo "๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ"
    echo ""
    echo "\033[32m
              _______ยงยง_____ยงยงยง___ยงยงยง____ยงยงยง___ยง________ยงยง
              ______ยง__ยง___ยง_____ยง___ยง__ยง___ยง__ยง_______ยง__ยง
              ______ยง__ยง___ยง_____ยง___ยง__ยง___ยง__ยง_______ยง__ยง
              ______ยง__ยง____ยงยงยง___ยงยงยง____ยงยงยง___ยงยงยงยง____ยง__ยง
              _ยงยง____ยง__ยง_____________________________ยง__ยง____ยงยง
              ยง__ยง___ยง__ยง_____________________________ยง__ยง___ยง__ยง
              ยง___ยง__ยง__ยง_____________________________ยง__ยง__ยง___ยง
              _ยง___ยง__ยง__ยง___________________________ยง__ยง__ยง___ยง
              __ยง___ยงยงยงยงยงยงยง_________________________ยงยงยงยงยงยงยง___ยง
              ___ยง____ยง___ยง_________________________ยง___ยง____ยง
              ____ยงยงยงยง_____ยง_______________________ยง_____ยงยงยงยง
              ___ยง___ยง__ยงยง_ยง_________ยงยงยงยงยง_________ยง_ยงยง__ยง___ยง
              ___ยง___ยง__ยง__ยง_______ยงยง_____ยงยง_______ยง__ยง__ยง___ยง
              ____ยงยงยงยงยงยง___ยง______ยง_________ยง______ยง___ยงยงยงยงยงยง
              ____ยง___ยง___ยง_ยง____ยง__8____8___ยง____ยง_ยง___ยง___ยง
              _____ยงยงยง___ยง___ยง___ยง___________ยง___ยง___ยง___ยงยงยง
              ________ยงยงยงยงยง___ยง_ยง_____________ยง_ยง___ยงยงยงยงยง
              _____________ยงยง__ยงยง_ยงยงยงยงยงยงยงยงยงยงยง_ยงยง__ยงยง
              _______________ยง__ยง_ยง__ยง___ยง__ยง_ยง__ยง
              ________________ยง_ยง_ยง__ยง___ยง__ยง_ยง_ยง
              _________________ยงยง_ยง__ยง___ยง__ยง_ยงยง
              __________________ยงยง_ยง_ยง___ยง_ยง_ยงยง
              ___________________ยง__ยงยงยงยงยงยงยง__ยง
              ____________________ยง__ยงยงยงยงยง__ยง
              _____________________ยงยง_____ยงยง
              _______________________ยงยงยงยงยง
    \033[0m"
    sleep 4
  fi
fi

if [ "$TESTUNIT" = true ] && [ "$all_success" = true ]; then
  clear
  echo "โจ๐คฉ ...Running unit tests... ๐คฉโจ"
  make test--unit
  if [ $? -ne 0 ]; then
    echo "\033[31mUnit tests failed.\033[0m"
    echo ""
    echo ""
    echo "๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ"
    echo ""
    echo "\033[31m      
      โโโโโโโโ โโโโโโ โโโโโโ     โโโ   โโโโโโโโโโ โโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโโโโโโโโโโโโ     โโโ   โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโ  โโโโโโโโโโโโโโ     โโโ   โโโโโโโโโโโโโโโโโ      โโโโโโโโโ
      โโโโโโ  โโโโโโโโโโโโโโ     โโโ   โโโโโโโโโโโโโโโโโ      โโโโโโโโโ
      โโโ     โโโ  โโโโโโโโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโ    โโโโโโโโโ
      โโโ     โโโ  โโโโโโโโโโโโโโ โโโโโโโ โโโ  โโโโโโโโโโโ    โโโโโโโโโ
    \033[0m"                                                           
    echo ""
    echo "๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ"
    echo ""
    all_success=false
  else
    echo ""
    echo "๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ"
    echo ""
    echo "\033[32m
      โโโโโโโโโโโ   โโโ โโโโโโโ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโ   โโโโโโ     โโโ     โโโโโโ  โโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโ   โโโโโโ     โโโ     โโโโโโ  โโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโ โโโโโโโ  โโโโโโโ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
    \033[0m"
    echo ""
    echo "๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ"
    echo ""
    echo "\033[32m
              _______ยงยง_____ยงยงยง___ยงยงยง____ยงยงยง___ยง________ยงยง
              ______ยง__ยง___ยง_____ยง___ยง__ยง___ยง__ยง_______ยง__ยง
              ______ยง__ยง___ยง_____ยง___ยง__ยง___ยง__ยง_______ยง__ยง
              ______ยง__ยง____ยงยงยง___ยงยงยง____ยงยงยง___ยงยงยงยง____ยง__ยง
              _ยงยง____ยง__ยง_____________________________ยง__ยง____ยงยง
              ยง__ยง___ยง__ยง_____________________________ยง__ยง___ยง__ยง
              ยง___ยง__ยง__ยง_____________________________ยง__ยง__ยง___ยง
              _ยง___ยง__ยง__ยง___________________________ยง__ยง__ยง___ยง
              __ยง___ยงยงยงยงยงยงยง_________________________ยงยงยงยงยงยงยง___ยง
              ___ยง____ยง___ยง_________________________ยง___ยง____ยง
              ____ยงยงยงยง_____ยง_______________________ยง_____ยงยงยงยง
              ___ยง___ยง__ยงยง_ยง_________ยงยงยงยงยง_________ยง_ยงยง__ยง___ยง
              ___ยง___ยง__ยง__ยง_______ยงยง_____ยงยง_______ยง__ยง__ยง___ยง
              ____ยงยงยงยงยงยง___ยง______ยง_________ยง______ยง___ยงยงยงยงยงยง
              ____ยง___ยง___ยง_ยง____ยง__8____8___ยง____ยง_ยง___ยง___ยง
              _____ยงยงยง___ยง___ยง___ยง___________ยง___ยง___ยง___ยงยงยง
              ________ยงยงยงยงยง___ยง_ยง_____________ยง_ยง___ยงยงยงยงยง
              _____________ยงยง__ยงยง_ยงยงยงยงยงยงยงยงยงยงยง_ยงยง__ยงยง
              _______________ยง__ยง_ยง__ยง___ยง__ยง_ยง__ยง
              ________________ยง_ยง_ยง__ยง___ยง__ยง_ยง_ยง
              _________________ยงยง_ยง__ยง___ยง__ยง_ยงยง
              __________________ยงยง_ยง_ยง___ยง_ยง_ยงยง
              ___________________ยง__ยงยงยงยงยงยงยง__ยง
              ____________________ยง__ยงยงยงยงยง__ยง
              _____________________ยงยง_____ยงยง
              _______________________ยงยงยงยงยง
    \033[0m"
    sleep 4
  fi
fi

if [ "$TESTINTEGRATION" = true ] && [ "$all_success" = true ]; then
  clear
  echo "โจ๐คฉ ...Running integration tests... ๐คฉโจ"
  make test--integration
  if [ $? -ne 0 ]; then
    echo "\033[31mIntegration tests failed...\033[0m"
    echo ""
    echo ""
    echo "๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ"
    echo ""
    echo "\033[31m      
      โโโโโโโโ โโโโโโ โโโโโโ     โโโ   โโโโโโโโโโ โโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโโโโโโโโโโโโ     โโโ   โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโ  โโโโโโโโโโโโโโ     โโโ   โโโโโโโโโโโโโโโโโ      โโโโโโโโโ
      โโโโโโ  โโโโโโโโโโโโโโ     โโโ   โโโโโโโโโโโโโโโโโ      โโโโโโโโโ
      โโโ     โโโ  โโโโโโโโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโ    โโโโโโโโโ
      โโโ     โโโ  โโโโโโโโโโโโโโ โโโโโโโ โโโ  โโโโโโโโโโโ    โโโโโโโโโ
    \033[0m"                                                           
    echo ""
    echo "๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ"
    echo ""
    all_success=false
  else
    echo ""
    echo "๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ"
    echo ""
    echo "\033[32m
      โโโโโโโโโโโ   โโโ โโโโโโโ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโ   โโโโโโ     โโโ     โโโโโโ  โโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโ   โโโโโโ     โโโ     โโโโโโ  โโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโ โโโโโโโ  โโโโโโโ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
    \033[0m"
    echo ""
    echo "๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ"
    echo ""
    echo "\033[32m
              _______ยงยง_____ยงยงยง___ยงยงยง____ยงยงยง___ยง________ยงยง
              ______ยง__ยง___ยง_____ยง___ยง__ยง___ยง__ยง_______ยง__ยง
              ______ยง__ยง___ยง_____ยง___ยง__ยง___ยง__ยง_______ยง__ยง
              ______ยง__ยง____ยงยงยง___ยงยงยง____ยงยงยง___ยงยงยงยง____ยง__ยง
              _ยงยง____ยง__ยง_____________________________ยง__ยง____ยงยง
              ยง__ยง___ยง__ยง_____________________________ยง__ยง___ยง__ยง
              ยง___ยง__ยง__ยง_____________________________ยง__ยง__ยง___ยง
              _ยง___ยง__ยง__ยง___________________________ยง__ยง__ยง___ยง
              __ยง___ยงยงยงยงยงยงยง_________________________ยงยงยงยงยงยงยง___ยง
              ___ยง____ยง___ยง_________________________ยง___ยง____ยง
              ____ยงยงยงยง_____ยง_______________________ยง_____ยงยงยงยง
              ___ยง___ยง__ยงยง_ยง_________ยงยงยงยงยง_________ยง_ยงยง__ยง___ยง
              ___ยง___ยง__ยง__ยง_______ยงยง_____ยงยง_______ยง__ยง__ยง___ยง
              ____ยงยงยงยงยงยง___ยง______ยง_________ยง______ยง___ยงยงยงยงยงยง
              ____ยง___ยง___ยง_ยง____ยง__8____8___ยง____ยง_ยง___ยง___ยง
              _____ยงยงยง___ยง___ยง___ยง___________ยง___ยง___ยง___ยงยงยง
              ________ยงยงยงยงยง___ยง_ยง_____________ยง_ยง___ยงยงยงยงยง
              _____________ยงยง__ยงยง_ยงยงยงยงยงยงยงยงยงยงยง_ยงยง__ยงยง
              _______________ยง__ยง_ยง__ยง___ยง__ยง_ยง__ยง
              ________________ยง_ยง_ยง__ยง___ยง__ยง_ยง_ยง
              _________________ยงยง_ยง__ยง___ยง__ยง_ยงยง
              __________________ยงยง_ยง_ยง___ยง_ยง_ยงยง
              ___________________ยง__ยงยงยงยงยงยงยง__ยง
              ____________________ยง__ยงยงยงยงยง__ยง
              _____________________ยงยง_____ยงยง
              _______________________ยงยงยงยงยง
    \033[0m"
    sleep 4
  fi
fi

if [ "$TESTFEATURELOCAL" = true ] && [ "$all_success" = true ]; then
  clear
  echo "\033[32mโจ๐คฉ ...Running local feature tests... ๐คฉโจ\033[0m"
  make test--feature--local
  if [ $? -ne 0 ]; then
    echo "\033[31mLocal feature tests failed...\033[0m"
    echo ""
    echo ""
    echo "๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ"
    echo ""
    echo "\033[31m      
      โโโโโโโโ โโโโโโ โโโโโโ     โโโ   โโโโโโโโโโ โโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโโโโโโโโโโโโ     โโโ   โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโ  โโโโโโโโโโโโโโ     โโโ   โโโโโโโโโโโโโโโโโ      โโโโโโโโโ
      โโโโโโ  โโโโโโโโโโโโโโ     โโโ   โโโโโโโโโโโโโโโโโ      โโโโโโโโโ
      โโโ     โโโ  โโโโโโโโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโ    โโโโโโโโโ
      โโโ     โโโ  โโโโโโโโโโโโโโ โโโโโโโ โโโ  โโโโโโโโโโโ    โโโโโโโโโ
    \033[0m"                                                           
    echo ""
    echo "๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ"
    echo ""
    all_success=false
  else
    echo ""
    echo "๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ"
    echo ""
    echo "\033[32m
      โโโโโโโโโโโ   โโโ โโโโโโโ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโ   โโโโโโ     โโโ     โโโโโโ  โโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโ   โโโโโโ     โโโ     โโโโโโ  โโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโ โโโโโโโ  โโโโโโโ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
    \033[0m"
    echo ""
    echo "๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ"
    echo ""
    echo "\033[32m
              _______ยงยง_____ยงยงยง___ยงยงยง____ยงยงยง___ยง________ยงยง
              ______ยง__ยง___ยง_____ยง___ยง__ยง___ยง__ยง_______ยง__ยง
              ______ยง__ยง___ยง_____ยง___ยง__ยง___ยง__ยง_______ยง__ยง
              ______ยง__ยง____ยงยงยง___ยงยงยง____ยงยงยง___ยงยงยงยง____ยง__ยง
              _ยงยง____ยง__ยง_____________________________ยง__ยง____ยงยง
              ยง__ยง___ยง__ยง_____________________________ยง__ยง___ยง__ยง
              ยง___ยง__ยง__ยง_____________________________ยง__ยง__ยง___ยง
              _ยง___ยง__ยง__ยง___________________________ยง__ยง__ยง___ยง
              __ยง___ยงยงยงยงยงยงยง_________________________ยงยงยงยงยงยงยง___ยง
              ___ยง____ยง___ยง_________________________ยง___ยง____ยง
              ____ยงยงยงยง_____ยง_______________________ยง_____ยงยงยงยง
              ___ยง___ยง__ยงยง_ยง_________ยงยงยงยงยง_________ยง_ยงยง__ยง___ยง
              ___ยง___ยง__ยง__ยง_______ยงยง_____ยงยง_______ยง__ยง__ยง___ยง
              ____ยงยงยงยงยงยง___ยง______ยง_________ยง______ยง___ยงยงยงยงยงยง
              ____ยง___ยง___ยง_ยง____ยง__8____8___ยง____ยง_ยง___ยง___ยง
              _____ยงยงยง___ยง___ยง___ยง___________ยง___ยง___ยง___ยงยงยง
              ________ยงยงยงยงยง___ยง_ยง_____________ยง_ยง___ยงยงยงยงยง
              _____________ยงยง__ยงยง_ยงยงยงยงยงยงยงยงยงยงยง_ยงยง__ยงยง
              _______________ยง__ยง_ยง__ยง___ยง__ยง_ยง__ยง
              ________________ยง_ยง_ยง__ยง___ยง__ยง_ยง_ยง
              _________________ยงยง_ยง__ยง___ยง__ยง_ยงยง
              __________________ยงยง_ยง_ยง___ยง_ยง_ยงยง
              ___________________ยง__ยงยงยงยงยงยงยง__ยง
              ____________________ยง__ยงยงยงยงยง__ยง
              _____________________ยงยง_____ยงยง
              _______________________ยงยงยงยงยง
    \033[0m"
    sleep 4
  fi
fi

if [ "$TESTFEATUREINTEGRATION" = true ] && [ "$all_success" = true ]; then
  clear
  echo "โจ๐คฉ ...Running feature integration tests... ๐คฉโจ"
  make test--feature--integration
  if [ $? -ne 0 ]; then
    echo "Feature integration tests failed..."
    echo ""
    echo ""
    echo "๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ"
    echo ""
    echo "\033[31m      
      โโโโโโโโ โโโโโโ โโโโโโ     โโโ   โโโโโโโโโโ โโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโโโโโโโโโโโโ     โโโ   โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโ  โโโโโโโโโโโโโโ     โโโ   โโโโโโโโโโโโโโโโโ      โโโโโโโโโ
      โโโโโโ  โโโโโโโโโโโโโโ     โโโ   โโโโโโโโโโโโโโโโโ      โโโโโโโโโ
      โโโ     โโโ  โโโโโโโโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโ    โโโโโโโโโ
      โโโ     โโโ  โโโโโโโโโโโโโโ โโโโโโโ โโโ  โโโโโโโโโโโ    โโโโโโโโโ
    \033[0m"                                                           
    echo ""
    echo "๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ"
    echo ""
    all_success=false
  else
    echo ""
    echo "๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ"
    echo ""
    echo "\033[32m
      โโโโโโโโโโโ   โโโ โโโโโโโ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโ   โโโโโโ     โโโ     โโโโโโ  โโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโ   โโโโโโ     โโโ     โโโโโโ  โโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโ โโโโโโโ  โโโโโโโ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
    \033[0m"
    echo ""
    echo "๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ"
    echo ""
    echo "\033[32m
              _______ยงยง_____ยงยงยง___ยงยงยง____ยงยงยง___ยง________ยงยง
              ______ยง__ยง___ยง_____ยง___ยง__ยง___ยง__ยง_______ยง__ยง
              ______ยง__ยง___ยง_____ยง___ยง__ยง___ยง__ยง_______ยง__ยง
              ______ยง__ยง____ยงยงยง___ยงยงยง____ยงยงยง___ยงยงยงยง____ยง__ยง
              _ยงยง____ยง__ยง_____________________________ยง__ยง____ยงยง
              ยง__ยง___ยง__ยง_____________________________ยง__ยง___ยง__ยง
              ยง___ยง__ยง__ยง_____________________________ยง__ยง__ยง___ยง
              _ยง___ยง__ยง__ยง___________________________ยง__ยง__ยง___ยง
              __ยง___ยงยงยงยงยงยงยง_________________________ยงยงยงยงยงยงยง___ยง
              ___ยง____ยง___ยง_________________________ยง___ยง____ยง
              ____ยงยงยงยง_____ยง_______________________ยง_____ยงยงยงยง
              ___ยง___ยง__ยงยง_ยง_________ยงยงยงยงยง_________ยง_ยงยง__ยง___ยง
              ___ยง___ยง__ยง__ยง_______ยงยง_____ยงยง_______ยง__ยง__ยง___ยง
              ____ยงยงยงยงยงยง___ยง______ยง_________ยง______ยง___ยงยงยงยงยงยง
              ____ยง___ยง___ยง_ยง____ยง__8____8___ยง____ยง_ยง___ยง___ยง
              _____ยงยงยง___ยง___ยง___ยง___________ยง___ยง___ยง___ยงยงยง
              ________ยงยงยงยงยง___ยง_ยง_____________ยง_ยง___ยงยงยงยงยง
              _____________ยงยง__ยงยง_ยงยงยงยงยงยงยงยงยงยงยง_ยงยง__ยงยง
              _______________ยง__ยง_ยง__ยง___ยง__ยง_ยง__ยง
              ________________ยง_ยง_ยง__ยง___ยง__ยง_ยง_ยง
              _________________ยงยง_ยง__ยง___ยง__ยง_ยงยง
              __________________ยงยง_ยง_ยง___ยง_ยง_ยงยง
              ___________________ยง__ยงยงยงยงยงยงยง__ยง
              ____________________ยง__ยงยงยงยงยง__ยง
              _____________________ยงยง_____ยงยง
              _______________________ยงยงยงยงยง
    \033[0m"
    sleep 4
  fi
fi

if [ "$TESTSMOKE" = true ] && [ "$all_success" = true ]; then
  clear
  echo "โจ๐คฉ ...Running smoke tests... ๐คฉโจ"
  make test--smoke
  if [ $? -ne 0 ]; then
    echo "Smoke tests failed."
    echo ""
    echo ""
    echo "๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ"
    echo ""
    echo "\033[31m      
      โโโโโโโโ โโโโโโ โโโโโโ     โโโ   โโโโโโโโโโ โโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโโโโโโโโโโโโ     โโโ   โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโ  โโโโโโโโโโโโโโ     โโโ   โโโโโโโโโโโโโโโโโ      โโโโโโโโโ
      โโโโโโ  โโโโโโโโโโโโโโ     โโโ   โโโโโโโโโโโโโโโโโ      โโโโโโโโโ
      โโโ     โโโ  โโโโโโโโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโ    โโโโโโโโโ
      โโโ     โโโ  โโโโโโโโโโโโโโ โโโโโโโ โโโ  โโโโโโโโโโโ    โโโโโโโโโ
    \033[0m"                                                           
    echo ""
    echo "๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ๐ฉ๐คฌ"
    echo ""
    all_success=false
  else
    echo ""
    echo "๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ"
    echo ""
    echo "\033[32m
      โโโโโโโโโโโ   โโโ โโโโโโโ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโ   โโโโโโ     โโโ     โโโโโโ  โโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโ   โโโโโโ     โโโ     โโโโโโ  โโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
      โโโโโโโโ โโโโโโโ  โโโโโโโ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
    \033[0m"
    echo ""
    echo "๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ"
    echo ""
    echo "\033[32m
              _______ยงยง_____ยงยงยง___ยงยงยง____ยงยงยง___ยง________ยงยง
              ______ยง__ยง___ยง_____ยง___ยง__ยง___ยง__ยง_______ยง__ยง
              ______ยง__ยง___ยง_____ยง___ยง__ยง___ยง__ยง_______ยง__ยง
              ______ยง__ยง____ยงยงยง___ยงยงยง____ยงยงยง___ยงยงยงยง____ยง__ยง
              _ยงยง____ยง__ยง_____________________________ยง__ยง____ยงยง
              ยง__ยง___ยง__ยง_____________________________ยง__ยง___ยง__ยง
              ยง___ยง__ยง__ยง_____________________________ยง__ยง__ยง___ยง
              _ยง___ยง__ยง__ยง___________________________ยง__ยง__ยง___ยง
              __ยง___ยงยงยงยงยงยงยง_________________________ยงยงยงยงยงยงยง___ยง
              ___ยง____ยง___ยง_________________________ยง___ยง____ยง
              ____ยงยงยงยง_____ยง_______________________ยง_____ยงยงยงยง
              ___ยง___ยง__ยงยง_ยง_________ยงยงยงยงยง_________ยง_ยงยง__ยง___ยง
              ___ยง___ยง__ยง__ยง_______ยงยง_____ยงยง_______ยง__ยง__ยง___ยง
              ____ยงยงยงยงยงยง___ยง______ยง_________ยง______ยง___ยงยงยงยงยงยง
              ____ยง___ยง___ยง_ยง____ยง__8____8___ยง____ยง_ยง___ยง___ยง
              _____ยงยงยง___ยง___ยง___ยง___________ยง___ยง___ยง___ยงยงยง
              ________ยงยงยงยงยง___ยง_ยง_____________ยง_ยง___ยงยงยงยงยง
              _____________ยงยง__ยงยง_ยงยงยงยงยงยงยงยงยงยงยง_ยงยง__ยงยง
              _______________ยง__ยง_ยง__ยง___ยง__ยง_ยง__ยง
              ________________ยง_ยง_ยง__ยง___ยง__ยง_ยง_ยง
              _________________ยงยง_ยง__ยง___ยง__ยง_ยงยง
              __________________ยงยง_ยง_ยง___ยง_ยง_ยงยง
              ___________________ยง__ยงยงยงยงยงยงยง__ยง
              ____________________ยง__ยงยงยงยงยง__ยง
              _____________________ยงยง_____ยงยง
              _______________________ยงยงยงยงยง
    \033[0m"
    sleep 4
  fi
fi

if [ "$DESTROY" = true ] && [ "$all_success" = true ]; then
  clear
  echo "โจ๐คฉ ...Cleaning up $WORKSPACE... ๐คฉโจ"
  # make apigee--detach-product && clear && 
  make terraform--destroy && make destroy--corrupted TERRAFORM_WORKSPACE="$WORKSPACE" TERRAFORM_ROLE_NAME="NHSDeploymentRole" && make terraform--destroy && make clean && clear  
  echo ""
  echo "๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐"
  echo ""
  echo "\033[32m
     โโโโโโโโโโโโโโ โโโโ   โโโโ    โโโโโโโ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โโโโโโโ โโโ   โโโโโโโโโโโโโโโโโโ     โโโโโโโโโ
    โโโโโโโโโโโโโโโโโโโโโ โโโโโ    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโ
    โโโ     โโโโโโโโโโโโโโโโโโโ    โโโ  โโโโโโโโโ  โโโโโโโโ   โโโ   โโโโโโโโโโโ   โโโ โโโโโโโ โโโโโโ  โโโ  โโโ    โโโโโโโโโ
    โโโ     โโโโโโโ โโโโโโโโโโโ    โโโ  โโโโโโโโโ  โโโโโโโโ   โโโ   โโโโโโโโโโโ   โโโ  โโโโโ  โโโโโโ  โโโ  โโโ    โโโโโโโโโ
    โโโโโโโโโโโ     โโโ โโโ โโโ    โโโโโโโโโโโโโโโโโโโโโโโโ   โโโ   โโโ  โโโโโโโโโโโโ   โโโ   โโโโโโโโโโโโโโโโ    โโโโโโโโโ
     โโโโโโโโโโ     โโโ     โโโ    โโโโโโโ โโโโโโโโโโโโโโโโ   โโโ   โโโ  โโโ โโโโโโโ    โโโ   โโโโโโโโโโโโโโโ     โโโโโโโโโ
  \033[0m"
  echo ""
  echo "๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐๐คฉ๐"
  echo ""
  # echo "\033[31m---------------------\033[0m"
  # echo "\033[31mUnit Test Failures...\033[0m"
  # echo "\033[31m---------------------\033[0m"
  # echo ""
  # grep "FAILED" ~/logs/unit.log
  # echo ""
  # echo "\033[31m----------------------------\033[0m"
  # echo "\033[31mIntegration Test Failures...\033[0m"
  # echo "\033[31m----------------------------\033[0m"
  # echo ""
  # grep "FAILED" ~/logs/int.log
  # echo ""
  # echo "\033[31m------------------------------\033[0m"
  # echo "\033[31mFeature Test Local Failures...\033[0m"
  # echo "\033[31m------------------------------\033[0m"
  # echo ""
  # grep --after-context 40 "Failing scenarios:" ~/logs/floc.log
  # echo ""
  # echo "\033[31m------------------------------------\033[0m"
  # echo "\033[31mFeature Test Integration Failures...\033[0m"
  # echo "\033[31m------------------------------------\033[0m"
  # echo ""
  # grep --after-context 40 "Failing scenarios:" ~/logs/fint.log
  # echo ""
  # echo "\033[31m-----------------\033[0m"
  # echo "\033[31mSmoke Failures...\033[0m"
  # echo "\033[31m-----------------\033[0m"
  # echo ""
  # grep "FAILED" ~/logs/smoke.log
  # echo ""
elif [ "$DESTROY" = true ]; then
  echo "Skipping cleanup due to previous errors."
fi










